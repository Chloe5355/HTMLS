<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>çœŸå‰£è¡°å¼±</title>

<style>
:root {
  /* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢åˆæœŸå€¤ */
  --title-bg-color: #ffffff;
  --title-text-color: #000000;
  --title-button-bg: #000000;
  --title-button-text: #ffffff;

  /* ã‚²ãƒ¼ãƒ ç”»é¢åˆæœŸå€¤ */
  --bg-color: #000000;
  --card-bg-color: #111111;
  --card-border-color: #ffffff;
  --card-match-bg-color: #d291ff;
  --button-bg-color: #d291ff;
  --button-text-color: #000000;
  --status-bg: #111111;
  --status-text: #ffffff;
  --grid-size: 8;
}

/* ---------------- BASE ---------------- */
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin:0;
  padding:0;
  background: var(--bg-color);
}

/* ---------------- TITLE SCREEN ---------------- */
#titleScreen {
  display: none;
  padding: 10px;
  background-color: var(--title-bg-color);
  color: var(--title-text-color);
}
#titleScreen.active { display:block; }

#titleScreen button {
  background: var(--title-button-bg);
  color: var(--title-button-text);
  transition: 0.3s;
}
#titleScreen button:hover {
  background: var(--title-button-text);
  color: var(--title-button-bg);
  transform: scale(1.05);
}

/* ---------------- OTHER SCREENS ---------------- */
.screen { display:none; padding:10px; }
.screen.active { display:block; }

h1 { margin-bottom:10px; text-shadow: 1px 1px 2px #000; }

.flag {
  width:128px;
  max-width:20vw;
  border-radius:50%;
  border:2px solid var(--card-border-color);
  margin:20px auto;
  display:block;
  box-shadow: 0 4px 8px rgba(0,0,0,0.4);
  transition: transform 0.3s;
}
.flag:hover { transform: rotate(10deg) scale(1.05); }

/* ---------------- BOARD ---------------- */
.board {
  display:grid;
  grid-template-columns: repeat(var(--grid-size), 1fr);
  grid-gap:6px;
  justify-content:center;
  margin:10px auto;
  width:90vw;
  max-width:800px;
  aspect-ratio:1 / 1;
}

.card {
  width:100%;
  height:100%;
  background:var(--card-bg-color);
  border:2px solid var(--card-border-color);
  display:flex;
  justify-content:center;
  align-items:center;
  font-size: clamp(12px, calc(24px / (4 / var(--grid-size))), 32px);
  cursor:pointer;
  user-select:none;
  transition: transform 0.3s, background 0.3s;
  border-radius: 8px;
  box-shadow: 0 3px 6px rgba(0,0,0,0.5);
}

.card:hover { transform: scale(1.05) rotateY(5deg); }
.card.matched { background: var(--card-match-bg-color); cursor:default; transform: scale(1.1); box-shadow: 0 0 12px var(--card-match-bg-color); }

/* ---------------- BUTTONS ---------------- */
button {
  background: var(--button-bg-color);
  color: var(--button-text-color);
  border:none;
  padding:10px 16px;
  margin:4px;
  font-size:1.1em;
  border-radius:6px;
  cursor:pointer;
  transition: 0.3s;
}
button:hover { transform: scale(1.05); box-shadow: 0 0 10px var(--button-bg-color); }

/* ---------------- MODAL ---------------- */
.modal {
  display:none;
  position:fixed;
  z-index:1000;
  left:0; top:0;
  width:100%; height:100%;
  background-color: rgba(0,0,0,0.6);
  justify-content:center;
  align-items:center;
}

.modalContent {
  background-color:#fff;
  padding:20px;
  border-radius:10px;
  max-width:400px;
  margin:auto;
  text-align:left;
  color:#000;
  box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}

/* ---------------- STATUS ---------------- */
#status { display:flex; justify-content:center; gap:20px; margin:10px 0; }
#status div { background: var(--status-bg); padding:10px 14px; border-radius:8px; color: var(--status-text); font-weight:bold; box-shadow: 0 2px 6px rgba(0,0,0,0.5); }

/* ---------------- RESPONSIVE ---------------- */
@media(max-width:600px){
  body { font-size:16px; }
  .flag { width:80px; max-width:30vw; margin:20px auto; }
  .card { font-size: clamp(12px, calc(18px / (4 / var(--grid-size))), 24px); width:calc(90vw / var(--grid-size)); height:calc(90vw / var(--grid-size)); }
  .board { grid-gap:4px; }
  button { font-size:1.3em; padding:12px 20px; }
  .modalContent { max-width:90%; font-size:1em; }
}
</style>
</head>
<body>

<div id="titleScreen" class="screen active">
  <h1>çœŸå‰£è¡°å¼±</h1>
  <img id="flag" class="flag" src="https://chloe5355.github.io/HTMLS/img/Columbina.png" alt="æ——">

  <label for="boardSize">ç›¤é¢ã‚µã‚¤ã‚º:</label>
  <select id="boardSize">
    <option value="4">4x4</option>
    <option value="8" selected>8x8</option>
  </select>
  <br>

  <label for="aiDifficulty">AIé›£æ˜“åº¦:</label>
  <select id="aiDifficulty">
    <option value="easy">å¼±</option>
    <option value="medium">ä¸­</option>
    <option value="hard">å¼·</option>
  </select>
  <br><br>

  <!-- ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼å¤‰æ›´ -->
  <div id="themeSettings">
    <h3>ğŸ¨ ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚²ãƒ¼ãƒ ã‚«ãƒ©ãƒ¼</h3>
    <label>ã‚¿ã‚¤ãƒˆãƒ«èƒŒæ™¯: <input type="color" id="bgColorPicker"></label><br>
    <label>ã‚¿ã‚¤ãƒˆãƒ«æ–‡å­—: <input type="color" id="textColorPicker"></label><br>
    <label>ã‚¿ã‚¤ãƒˆãƒ«ãƒœã‚¿ãƒ³èƒŒæ™¯: <input type="color" id="btnBgPicker"></label><br>
    <label>ã‚¿ã‚¤ãƒˆãƒ«ãƒœã‚¿ãƒ³æ–‡å­—: <input type="color" id="btnTextPicker"></label><br>
    <label>ã‚²ãƒ¼ãƒ èƒŒæ™¯: <input type="color" id="gameBgPicker"></label><br>
    <label>ã‚«ãƒ¼ãƒ‰èƒŒæ™¯: <input type="color" id="cardBgPicker"></label><br>
    <label>ã‚«ãƒ¼ãƒ‰å¢ƒç•Œç·š: <input type="color" id="cardBorderPicker"></label><br>
    <label>ã‚«ãƒ¼ãƒ‰æƒãˆè‰²: <input type="color" id="cardMatchPicker"></label><br>
    <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹èƒŒæ™¯: <input type="color" id="statusBgPicker"></label><br>
    <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ–‡å­—: <input type="color" id="statusTextPicker"></label><br>
    <label>ã‚²ãƒ¼ãƒ ãƒœã‚¿ãƒ³èƒŒæ™¯: <input type="color" id="gameBtnBgPicker"></label><br>
    <label>ã‚²ãƒ¼ãƒ ãƒœã‚¿ãƒ³æ–‡å­—: <input type="color" id="gameBtnTextPicker"></label><br>
    <button id="applyThemeBtn">ç¢ºå®š</button>
  </div>
  <br>

  <button onclick="startGame()">â–¶ ã‚²ãƒ¼ãƒ é–‹å§‹</button>
  <button onclick="showRules()">ğŸ“– ãƒ«ãƒ¼ãƒ«</button>

  <div id="achievements">
    <h3>ğŸ“œ å®Ÿç¸¾</h3>
    <ul id="achievementList">
      <li>å‹åˆ©å›æ•°: <span id="winCount">0</span></li>
    </ul>
  </div>
</div>

<div id="rulesModal" class="modal">
  <div class="modalContent">
    <h2>ãƒ«ãƒ¼ãƒ«</h2>
    <p>åŒã˜æ•°ã®ã‚«ãƒ¼ãƒ‰ã‚’æƒãˆã‚‹çœŸå‰£è¡°å¼±ã‚²ãƒ¼ãƒ ã§ã™ã€‚AIã¨äº¤äº’ã«ã‚ãã‚Šã€æƒãˆãŸæšæ•°ãŒå¤šã„æ–¹ãŒå‹ã¡ã§ã™ã€‚</p>
    <button onclick="closeRules()">é–‰ã˜ã‚‹</button>
  </div>
</div>

<div id="gameScreen" class="screen">
  <div>
    <button onclick="stopGame()">â¹ ã‚²ãƒ¼ãƒ çµ‚äº†</button>
  </div>

  <div id="status">
    <p>ç¾åœ¨ã®ã‚¿ãƒ¼ãƒ³: <span id="currentTurn">ã‚ãªãŸ</span></p>
    <div id="playerScoreBox">ã‚ãªãŸ: <span id="playerScore">0</span> æš</div>
    <div id="aiScoreBox">AI: <span id="aiScore">0</span> æš</div>
  </div>

  <div id="board" class="board"></div>
</div>

<div id="winScreen" class="screen">
  <h1>ğŸ† çµæœ</h1>
  <p>ã‚ãªãŸ: <span id="playerPairs">0</span> æš</p>
  <p>AI: <span id="aiPairs">0</span> æš</p>
  <p>å‹è€…: <span id="winner">ãªã—</span></p>
  <button onclick="nextGame()">æ¬¡ã®ã‚²ãƒ¼ãƒ </button>
  <button onclick="stopGame()">ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹</button>
</div>

<script>
// ---------------- THEME PREVIEW & SAVE ----------------
const themePickers = {
  titleBg: document.getElementById('bgColorPicker'),
  titleText: document.getElementById('textColorPicker'),
  titleBtnBg: document.getElementById('btnBgPicker'),
  titleBtnText: document.getElementById('btnTextPicker'),
  gameBg: document.getElementById('gameBgPicker'),
  cardBg: document.getElementById('cardBgPicker'),
  cardBorder: document.getElementById('cardBorderPicker'),
  cardMatch: document.getElementById('cardMatchPicker'),
  statusBg: document.getElementById('statusBgPicker'),
  statusText: document.getElementById('statusTextPicker'),
  gameBtnBg: document.getElementById('gameBtnBgPicker'),
  gameBtnText: document.getElementById('gameBtnTextPicker')
};
const applyBtn = document.getElementById('applyThemeBtn');

// åˆæœŸå€¤ãƒ­ãƒ¼ãƒ‰
window.addEventListener('DOMContentLoaded', ()=>{
  if(localStorage.getItem('fullTheme')){
    const theme = JSON.parse(localStorage.getItem('fullTheme'));
    for(let key in theme){
      themePickers[key].value = theme[key];
      document.documentElement.style.setProperty('--' + key.replace(/([A-Z])/g,'-$1').toLowerCase(), theme[key]);
    }
  }
  previewTheme();
});

function previewTheme() {
  for(let key in themePickers){
    const varName = '--' + key.replace(/([A-Z])/g,'-$1').toLowerCase();
    document.documentElement.style.setProperty(varName, themePickers[key].value);
  }
}

// ç¢ºå®šãƒœã‚¿ãƒ³ã§ä¿å­˜
applyBtn.addEventListener('click', ()=>{
  const theme = {};
  for(let key in themePickers){ theme[key] = themePickers[key].value; }
  localStorage.setItem('fullTheme', JSON.stringify(theme));
  previewTheme();
});

// è‰²é¸æŠã§å³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
for(let key in themePickers){
  themePickers[key].addEventListener('input', previewTheme);
}

// ---------------- GAME LOGIC ----------------
// å‰å›çµ±åˆç‰ˆ game.js ã‚’ã“ã“ã«ä¸¸ã”ã¨è²¼ã£ã¦ãã ã•ã„
</script>

</body>
</html>